 \begin{figure}[ht]
\centering
  \begin{slang}
view :Paywall do
  critical data Page
  data Link
  
  trusted component NYTimes [articles: Link ** Page, limit: Integer] do
    creates Page
    operation GetPage [link: Link, currCounter: Integer] do
      guard    { currCounter < limit }
      response { Client::SendPage[articles[link], currCounter + 1] }
    end
  end

  trusted component Client [counter: (dynamic Integer)] do
    operation SendPage[page: Page, newCounter: Integer] do 
      effects  { counter = newCounter }
      response { Reader::Display[page] }
    end
    operation SelectLink[link: Link] do
      response { NYTimes::GetPage[link, counter] }
    end
  end

  component Reader do
    operation Display[page: Page]
    response { Client::SelectLink }
  end
end
  \end{slang}

\caption{Paywall example in \sLang}
\label{fig-paywall-slang}
\end{figure}
