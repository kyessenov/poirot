%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ------------- reviewing tools -------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifx \mode \moderev

\def\Comment#1{\textcolor{red}{\scriptsize [#1]}}%
\def\comment#1#2{\textcolor{red}{\scriptsize [(#1): #2]}}%
\def\note#1#2{\textcolor{blue}{\scriptsize [\textbf{#1}: #2]}}%
\newcommand{\del}[1]{\textcolor{red}{\sout{#1}}}%
\newcommand{\fix}[2]{\del{#1}\textcolor{blue}{#2}}%
\newcommand{\fixed}[2]{\textcolor{red}{PROBLEM: #1}; \textcolor{blue}{FIX: #2}}

\else

\def\Comment#1{}%
\def\comment#1#2{}%
\def\note#1#2{}%
\newcommand{\del}[1]{}%
\newcommand{\fix}[2]{#2}%
\newcommand{\fixed}[2]{}

\fi

\def\todo#1{\note{TODO}{#1}}
\def\check#1{\note{CHECK}{#1}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ------------- code formatting -------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifx \codeformatting \codeminted

  \usemintedstyle{github}

  %% \definecolor{mintedbg}{rgb}{1,1,1}
  %% \definecolor{mintedbg}{rgb}{.15,.15,.13} % monokai
  %% \definecolor{mintedbg}{rgb}{.94,.95,.95} % manni
   \definecolor{mintedbg}{rgb}{.93,.93,.87} % perldoc
  %% \definecolor{mintedbg}{rgb}{.97,.97,.97} % tango
  %% \definecolor{mintedbg}{rgb}{.97,.97,.97} % emacs
  %% \definecolor{mintedbg}{rgb}{.94,.94,.94} % friendly
  %% \definecolor{mintedbg}{rgb}{.125, .125, .125} % native

  \newminted[slang]{slang}{fontsize=\scriptsize,bgcolor=mintedbg,frame=single,linenos=true}
  
  \newmintinline[slanginline]{slang}{fontsize=\small}

\else
\lstnewenvironment{slang}[1][]{%
  \lstset{language=slang,
    floatplacement={tbp},captionpos=b,
    xleftmargin=0pt,xrightmargin=0pt,#1}}{}
\newcommand{\slangfile}[1]{
  \lstinputlisting[language=slang,%
    frame=lines,xleftmargin=0pt,xrightmargin=0pt,columns=fixed]{#1}
}
\fi
